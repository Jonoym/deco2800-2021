name: Java Unit Tests

on: [push] # Will trigger whenever a push is made to the branch

jobs:
  run_unit_tests:
    runs-on: ubuntu-latest # Running on this OS, if we need it changed lmk

    steps:
      - uses: actions/checkout@v2 # Checkout repo to remote machine
      - name: Set up OpenJDK13 
        uses: actions/setup-java@v1
        with:
          java-version: '13'
      - name: Build with Gradle
        run: |
          $GRADLE_DIR/gradlew test
        env:
          GRADLE_DIR: './Source/'
      - name: Post to Slack # Notify the students
        uses: rtCamp/action-slack-notify@v2.1.3
        env:
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}
          SLACK_CHANNEL: 'banter'
          SLACK_MESSAGE: 'Unit tests workflow finished!'